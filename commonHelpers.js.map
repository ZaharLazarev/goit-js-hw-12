{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"44825095-5da981a8d37f63705e36ec7d1\";\n\nexport async function fetchData({ q, page, pageSize } = {}) {\n  try{\n    const response = await axios.get(`https://pixabay.com/api/?key=${API_KEY}&q=${q}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${pageSize}&lang=en`)\n    return response.data;\n  }\n  catch(error){\n    console.error('Error fetching data:', error);\n    throw error;\n  }\n}\n","export function renderCard(data) {\n  return data.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=${largeImageURL}>\n        <img\n          class=\"gallery-image\"\n          src=${webformatURL}\n          data-source=${largeImageURL}\n          alt=\"${tags}\"\n        />\n      </a>\n      <div class=\"text-container\">\n        <p>Likes <span class=\"text-span\">${likes}</span></p>\n        <p>Views <span class=\"text-span\">${views}</span></p>\n        <p>Comments <span class=\"text-span\">${comments}</span></p>\n        <p>Downloads <span class=\"text-span\">${downloads}</span></p>\n      </div>\n    </li>\n  `).join(\"\");\n}\n","import axios from 'axios';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchData } from \"./js/pixabay-api.js\";\nimport { renderCard } from \"./js/render-functions.js\";\n\nconst refs = {\n  form: document.querySelector(\".form_for_image\"),\n  inp: document.querySelector(\".input\"),\n  button: document.querySelector(\".button\"),\n  list: document.querySelector(\".gallery\"),\n  loader: document.querySelector(\".loader\"),\n  loadButton: document.querySelector(\".load-button\"),\n  loadingText: document.querySelector(\".loading-text\"),\n};\n\nconst params = {\n  q: \"\",\n  page: 1,\n  pageSize: 15,\n  maxPage: 0,\n};\n\nconst hiddenClass = \"is-hidden\";\n\nfunction hide(element) {\n  element.classList.add(hiddenClass);\n}\n\nfunction show(element) {\n  element.classList.remove(hiddenClass);\n}\n\nfunction disable(button) {\n  button.disabled = true;\n}\n\nfunction enable(button) {\n  button.disabled = false;\n}\n\nhide(refs.loadButton);\nrefs.loader.style.display = \"none\";\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nrefs.form.addEventListener(\"submit\", handler);\n\nfunction handler(event) {\n  event.preventDefault();\n  params.page = 1;\n  refs.list.innerHTML = \"\";\n  const inputValue = refs.inp.value.trim().toLowerCase();\n  if (inputValue === \"\") {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query!'\n    });\n    return;\n  }\n\n  params.q = inputValue;\n  fetchImages();\n}\n\nasync function fetchImages() {\n  showLoader();\n  try {\n    const data = await fetchData(params);\n    hideLoader();\n    if (data.hits.length > 0) {\n      const markup = renderCard(data.hits);\n      refs.list.innerHTML += markup;\n      gallery.refresh();\n      logGalleryItemDimensions(0.3);\n      show(refs.loadButton);\n      enable(refs.loadButton);\n      refs.loadButton.addEventListener(\"click\", handleLoad);\n    } else {\n      hide(refs.loadButton);\n      iziToast.error({\n        title: '',\n        message: 'Sorry, there are no images matching your search query. Please try again!'\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    onFetchError(error);\n  }\n}\n\nasync function handleLoad() {\n  params.page += 1;\n  hide(refs.loadButton);\n  showLoader();\n  try {\n    const data = await fetchData(params);\n    const markup = renderCard(data.hits);\n    refs.list.innerHTML += markup;\n    gallery.refresh();\n    logGalleryItemDimensions(3.4);\n    show(refs.loadButton);\n    hideLoader();\n    params.maxPage = Math.ceil(data.totalHits / params.pageSize);\n    if (params.page === params.maxPage) {\n      hide(refs.loadButton);\n      refs.loadButton.removeEventListener(\"click\", handleLoad);\n      iziToast.error({\n        title: 'End of results',\n        message: `We're sorry, but you've reached the end of search results.`\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Error during request: ${error}`\n    });\n  }\n}\n\nfunction logGalleryItemDimensions(quantity) {\n  const galleryItem = document.querySelector(\".gallery-item\");\n  if (galleryItem) {\n    const rect = galleryItem.getBoundingClientRect();\n    window.scrollBy(0, rect.height * quantity);\n  }\n}\n\nfunction onFetchError(error) {\n  console.error('Error fetching data:', error);\n}\n\nfunction showLoader() {\n  refs.loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n  refs.loader.style.display = \"none\";\n}\n"],"names":["API_KEY","fetchData","q","page","pageSize","axios","error","renderCard","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","params","hiddenClass","hide","element","show","enable","button","gallery","SimpleLightbox","handler","event","inputValue","iziToast","fetchImages","showLoader","hideLoader","markup","logGalleryItemDimensions","handleLoad","onFetchError","quantity","galleryItem","rect"],"mappings":"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"}